**What I usually forget or an unfamiliar with**

- RDS authentication with IAM is possible
  - works with MySQL and Postgres
  - Uses auth token instead of passwords
    - RDS generates on request
    - Generated using AWS Signature v4
    - 15 minutes lifetime.
  - No need to store user credentials. Managed by IAM
  - Can still use database auth.
  - Network traffic is encrypted using SSL
  - Can use profile credentials specific to EC2 instance to access database instead of passwords.
- AWS Budgets can set custom budget that alerts when cost, usage, or forecasted usage exceeds the budget.
  - Monthly, quarterly, or yearly
  - Alerts can be sent via email or SNS topic
  - Set a custom reservation utlitization target. Receive alerts when underutilized.
  - Create and track from Budgets dashboard or Budgets API
- Cost explorer helps visualize and manage AWS costs and usages over time.
  - Reports / data last up to the last 13 months.
  - Forecast next three months
  - Recommend RI purchases.
- Convert private key (.pem) to .ppk to ssh instance using PuTTY
- Usual AMI usernames
  - Amazon Linux - ec2-user
  - RHEL - ec2-user / root
  - Ubuntu - ubuntu / root
  - Cenots - centos
  - Debian - admin / root
  - Fedora - ec2-user
  - SUSE - ec2-user / root
- S3 Client side encryption
  - Encrypt data before sending to S3
  - Can either use:
    - AWS KMS-managed customer master key
      - Provide AWS KMS customer master key ID (CMK ID) to AWS.
    - Client-side master key.
      - Client-side master keys and unencrypted data are never sent to AWS.
    - Cannot decrypt data when encryption keys are lost.
  - When uploading:
    - S3 encryption client generates one-time-use symmetric key aka data encryption key or data key. 
      - Uses data key to encrypt single S3 object, ie data key is per object.
    - Client encrypts the data key using the provided master key.
    - Client uploads the encrypted data key and its material description as part of the object metadata.
       - Client uses the material description to know which client-side master key to use for decryption.
    - Client uploads encrypted data to S3
    - Client saves encrypted data key as object metadata (x-amz-meta-x-amz-key) in S3.
  - When downloading:
    - Client downloads encrypted object
    - Client determines the master key to use from the object's metadata
    - Client uses master key to decrypt the data key
    - Client uses data key to decrypt the object.
- S3 Server-side Encryption
  - AWS KMS-Managed Keys (SSE-KMS) 
    - Uploaded and managed by AWS
  - Customer-provided key (SSE-C)
    - Encryption key is part of the request to upload the object to S3.
    - S3 does both the encryption and decryption
- Possible to host a web app in S3.
  - Enable CORS support in the bucket to make authenticated requests the same bucket.
- S3 Cross-Region Replication (CRR)
  - Bucket configuraiton
  - Automatic, async copying of objects across buckets in different AWS Regions.
- Security group
  - Instance level
  - Instance in a subnet in a VPC can have a different set of SG from the rest.
  - Instance is assigned the default sg of the VPC if not assigned at launch time.
  - Limit of 5 sg assigned to an instance
- Metrics not readily available in CloudWatch
  - Memory utilization
  - Disk swap utilization
  - Disk space utilization
  - Page file utilization
  - Log collection
- Lambda encryption
  - Lambda encrypts environment variables using KMS
  - When invoked, Lambda decrypts the env variables and make it available to the code.
  - Lambda uses a default service key on first create or update of Lambda function that uses env variables to encrypt env variables.
  - To use encryption helpers and use JMS to encrypt env variables after the lambda us created, create an AWS KMS key and use it instead of the default key.
- CIDR block
  - Given /27
    - 32 - 27 (mask number) = 5
    - 2^5 = 32
    - 32 - 5 (first 4 and last IP address) = 27
  - First 4 and last IP address in each subnet CIDR block are not available for use.
  - The allowed block size is between /28 and /16
  - Must not overlap with any existing CIDR block that's associated with the VPC
  - Cannot increase of decrease block size.
  - The number of CIDR blocks associated with a VPC is limited.
  - The number of routes you can add to route table is limited.
  - CIDR block must not be the same or larger than the CIDR range of a route in any of the VPC route tables.
    - 10.0.0.0/25 (smaller) can be associated with 10.0.0.0/24
- Kinesis Data Firehose
  - load streaming data into data stores and analytics tools
    - S3
    - Redshift
    - Elasticsearch
    - Splunk
  - Near real-time analytics
  - Fully managed, auto scales
  - Batch, compress, and encrypt data before loading it to the destination.
- S3 Select
  - Retrieve specific data from contents of an object using SQL expressions without retrieving the entire object.
- Redshift Spectrum
  - Run queries against exabytes of unstructured data in S3 with no loading or ETL required.
- Bring Your Own IP Addresses (BYOIP)
  - Bring part or all of your public IPv4 address range to you AWS account.
  - You still own the IP but AWS advertises it on the Internet.
  - Route Origin Authorization (ROA)
    - Document created through Regional Internet Registry (RIR)
    - Contains the address range, ASNs that are allowed to advertise the address range, and expiration date.
- S3 versioning
  - Can recover objects from accidental deletion or overwrite.
  - Preserver, retrieve, restore every version of ever object stored in S3 bucket.
- AMI Copying
  - Within or across an AWS region
  - Can copy EBS-backed AMI or instance store-backed AMIs
  - Can copy encrypted AMIs and AMIs with encrypted snapshots.
- DynamoDB Auto Scaling
  - Automate capacity management for your tables and global secondary indexes.
- EBS RAID options
  - RAID 0
    - When I/O performance is more important the fault tolerance, ie heavily used database
    - I/O is distributed across the volumes in a stripe.
    - Performance of the stripe is limited to the worst performing volume
    - Loss of a single volume results in complete data loss for the array.
  - RAID 1
    - When fault tolerance is more important the I/O performance.
    - Does not provide write performance improvement
    - Requires more EC2 to EBS bandwidth than non-RAID because data is written to multiple volumes simultaneously.
- Enhanced Networking
  - Can provide higher I/O performance and lower CPU utilization to EC2
  - Requires HVM AMI instead of PV AMI
- Placement groups
 - Used for inter-instance communication.
- SAML
  - AWS supports identify federation with SAML 2.0
  - Enables federated SSO. Login to AWS console or AWS API without having to create an IAM user for everyone in the org.
  - MS Active Directory implements SAML
- Web Identity Federation
  - Users sign in via an external identity provider, ie Amazon, Facebook, Google
- Data Transfer
  - Data transfer from EC2 to S3, Glacier, DynamoDB, SES, SQS, SimpleDB in the same region has no cost at all.
- AWS Directory service
  - For customers who want to use existing MS AD or LDAP-aware applications in the cloud.
  - AWS Directory Service Simple AD provides a subset of the features offered by AWS Managed MS AD.
- Mult-AZ RDS vs Read replica
  | Mutli-AZ RDS | Read replica |
  | --- | --- |
  | sync | async |
  | only primary is active | all are accessible and can be read |
  | automated backups are taken from standby | No backups by default |
  | 2 AZ in a region | Can be within AS, cross-AZ, or cross-region |
  | engine version upgrade on primary | engine version upgrade is independent from source instance |
  | automatic failover to standby | can be promoted to standalone |
- Instance stores
  - Named as ephemeral[0-23]
  - Data persists during reboots, intentional or not
  - Data is lost when
    - disk drive fails
    - instance stops
    - instance terminates
- RDS Enhanced Monitoring
  - See how different processes or threads use CPU.
  - View in console or consume Enhanced Monitoring JSON output from CloudWatch Logs
  - Metrics last for 30 days be default. Change via `RDSOSMetrics` log group retention.
  - Gathers metrics using an agent on the instance. CloudWatch gathers metrics from the hypervisor.
- EC2 health checks
  - Via ASG
    - Default healths for ASG are EC2 status checks only.
    - Instance gets replaced by ASG if health check fails
    - When attached to one or more LB or target groups, by default, does not consider an instance unhealthy and replace it if it fails the load balancer health checks.
    - Can be configured to use ELB health checks.
  - Via ELB health check 
    - Instance is unhealthy if it fails either the EC2 status checks or load balancer health checks.
    - When ASG is attached to multiple LB, all must report an instance is healthy to be considered healthy.
- Redshift Workload Management (WLM)
  - Default configuration is one queue that can run up to five queries concurrently.
  - Can add additional queues using default configuration unless modified.
  - The last queue added is the default queue.
- CloudTrail
  - Management events
    - Logged by default.
  - Data events
  - `--is-multi-region-trail`
    - Track all activities of all AWS regional services, ie EC3, S3, RDS, etc, on all regions
  - `--include-global-service-events`
    - Includes activity from global services, ie IAM, Route 53, AWS WAF, and CloudFront.
- Redshift Enhanced VPC Routing
  - Forces all COPY and UNLOAD traffic between cluster and data repositories through VPC.
    - If not enabled, routes traffic through the internet, including traffic to other AWS services.
  - Can use standard features, ie SG, NACL, VPC endpoint, VPC endpoint policies, IG, and DNS servers.
  - Can use VPC flow logs to monitor COPY and UNLOAD traffic in Redshift.
- DynamoDB stream
  - On CRUD
  - Stream record contains info about a data modificaiton to a single item in a DynamoDB table.
  - Can be configured to capture additional info like before and after images of modified items.
  - Integrated with Lambda. Can integrate stream ARN with a lambda function.
- Storing secrets for ECS
  - Store in either Secrets Manager secrets or Systems Manager Parameter Store parameters
  - Reference in container definition
  - Supported in both EC2 and Fargate
- API Gateway
  - Provides throttling at multiple levels including global and by service call.
    - Example config
      - Set a rate limit of 1000 requests per seconds for a specific method
      - Set to handle a burst of 2000 requests per second for a few seconds
  - Any request over the limit will receive a HTTP 429 response.
    - Client SDKs generated by API Gateway retry calls automatically when met with this response.
  - Can add caching. Specify size in GB. Control TTL.
- Inspector
  - Automated security assessment service that helps test the network accessibility of EC2 instances and security state of applications running on the instances.
- CloudFront
  - Signed URL
    - Use RTMP distribtuion. Signed cookies aren't supported for RTMP distribution
    - Restrict access to individual files
    - Users are using a client that doesn't support cookies
  - Signed cookies
    - Provide access to multiple files
    - Don't want to change current URLs
  - Match Viewer
    - Origin Protocol Policy
    - Communicate with origin using HTTP/S depending on the protocol of the viewer.
  - Field-Level Encryption
    - Securely upload user-submitted sensitive info to web servers.
- EBS Snapshots
  - Possible to take snapshots while still being able perform normal read and write on the volume
  - Multiple pending snapshots is possible but may result to reduced volume performance
- gp2
  - General Purpose SSD
  - Balance of price and performance
  - Recommended for most workloads
  - Bootable
  - 1GB - 16TB size
  - 16,000* max IOPS/volume
  - 250* MB/s max throughput/volume
- io1
  - Provisioned IOPS SSD
  - Mission-critical, low-latency, or high-throughput workloads
  - Consistent IOPS performance
  - Large databases, ie MongoDB, Cassandra, relational DBs
  - Bootable
  - 4GB - 16TB
  - 64,000* max IOPS/volume
  - 1,000* MB/s max througput/volume
- st1
  - Throughput-Optimized HDD
  - Throughput-optimized, frequently accessed workloads
  - Streaming workloads requiring consistent, fast throughput at a low price
  - Big data, data warehouses, log processing
  - Not bootable
  - 500GB - 16TB
  - 500 Max IOPS/volume
  - 500 MB/s Max throughput/volume
- sc1
  - Cold HDD
  - Throughput-optimized, infrequently accessed workloads
  - Lowest cost
  - Not bootable
  - 500GB - 16TB
  - 250 Max IOPS/volume
  - 250 MB/s Max throughput/volume
- Common among volumes
  - 80,000 Max IOPS/instance
  - 1,750 MB/s Max Throughput/instance
- Lamba@Edge
  - Run lambda functions to customize content that CloudFront delviers, executing the functions in locations closer to the viewer.
- Standard RIs
  - Change AZ, scope, network platform, or instance size within the instance family
- Convertible RIs
  - Option to change families, OS types, and tenancy
  - Can only be exchanged for other reserved RIs
- Scheduled RIs
  - Purchase capacity reservations that recur on a daily, weekly, or monthly basis, with a start time and duration, for a one-year term.
- Regional RIs
  - Reserve capacity to a specific AWS Region
- Zonal RI
  - Reserve capacity to a specific AZ
- SE One Zone-IA
  - For infrequenlty accessed data but requires rapid accss when needed.
  - Stored only in single AZ
  - Costs 20% less than S3 standard-IA
  - Same high durability, high throughput, and low latency as S3 Standard and S3 Standard-IA.
    - Durability of 11 9's of objects in AZ but data will be lost in event of AZ destruction.
    - 99.95% availability.
  - Good choice for secondary backup or easily recreatable data.
  - Set at the object level.
  - Can exist in the same bucket as S3 Standard and S3 Standard-IA
  - Can use Lifecycle Policies to automatically transition objects between storage classes
- DynamoDB partitions
  - Partition key design that doesn't distribute I/O requests evenly can create hot partitions that result in throttling and use provisioned I/O inefficiently.
  - Generally high-cardinality of parition keys == better performance
  - Less distince partition keys == slow performance
  - Composite key, composed of partition and sort key, improves performance.
- Redis security
  - applies to elasticache
  - `--auth-token` requires user to enter a password before being able to execute Redis commands on a password-protected Redis server. Use when creating a cluster or replication group.
  - `--transit-encryption-enabled`
- AWS Shield Advanced
  - Protect attacks on EC2, ELB, CloudFront, and Route53 resources
  - Detection and mitigation against large and sophisticated DDoS attacks, near real-time visibility into attacks, and integration with AWS WAF.
  - 24x7 access to AWS DDoS Response Team
  - All AWS customers benefit from AWS Shield Standard
